/* assets/assets/printable.css の改良案 */

/* --- 画面表示用プレビュー設定 --- */
@media screen {
    .printable-container {
        background-color: #f4f4f4;
        padding: 20px 0;
    }
    .printable-page {
        background: white;
        width: 210mm; /* A4サイズ */
        min-height: 297mm;
        margin: 0 auto 20px auto;
        padding: 15mm;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
    }
    .no-print { display: block !important; }
}

/* --- 印刷用設定 --- */
@media print {
    @page {
        size: A4 portrait;
        margin: 10mm;
    }
    
    body {
        background: white !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    .printable-page {
        width: 100% !important;
        margin: 0 !important;
        padding: 5mm !important;
        box-shadow: none !important;
    }

    /* 非表示にする要素 */
    #report-header,
    .no-print,
    #report-comment-input,
    .btn,
    .dash-loading {
        display: none !important;
    }

    /* 改ページ制御 */
    .page-break {
        page-break-after: always;
    }

    /* グラフの最適化 */
    .js-plotly-plot {
        width: 100% !important;
        height: 300px !important; /* 見やすさを考慮して少し大きく */
    }

    /* 4分割されている科目別グラフの調整 */
    #subject-charts-row > * {
        flex: 0 0 50% !important; /* 25%だと印刷では小さすぎるため50%（2列）に推奨 */
        max-width: 50% !important;
    }
}

/* --- デザイン・装飾 --- */
.report-title {
    font-weight: bold;
    color: #2c3e50;
    border-left: 8px solid #3498db;
    padding-left: 15px;
    margin-bottom: 0;
}

.report-hr {
    border-top: 2px solid #2c3e50;
    opacity: 1;
}

.section-title {
    background-color: #f8f9fa;
    padding: 8px 12px;
    border-bottom: 2px solid #dee2e6;
    margin-bottom: 15px;
    font-size: 1.1rem;
    font-weight: bold;
}

.student-info-box {
    border: 1px solid #dee2e6;
    padding: 10px 20px;
    display: inline-block;
    border-radius: 4px;
}

.label { font-size: 0.9rem; color: #6c757d; }
.value-name { font-size: 1.3rem; font-weight: bold; text-decoration: underline; }

.comment-print-box {
    display: none; /* 通常は見せない */
    border: 1px solid #ccc;
    padding: 15px;
    background-color: #fff;
    min-height: 300px;
    white-space: pre-wrap;
    font-size: 10pt;
    line-height: 1.6;
}

@media print {
    .comment-print-box {
        display: block !important; /* 印刷時のみ表示 */
    }
}